const p={context:void 0,registry:void 0};function Z(e){p.context=e}function he(){return{...p.context,id:`${p.context.id}${p.context.count++}-`,count:0}}const ge=(e,t)=>e===t,V=Symbol("solid-proxy"),pe=Symbol("solid-track"),Ce=Symbol("solid-dev-component"),R={equals:ge};let ue=ce;const j=1,H=2,le={owned:null,cleanups:null,context:null,owner:null},X={};var c=null;let Y=null,a=null,v=null,E=null,K=0;function z(e,t){const n=a,r=c,u=e.length===0,s=t===void 0?r:t,l=u?le:{owned:null,cleanups:null,context:s?s.context:null,owner:s},o=u?e:()=>e(()=>O(()=>W(l)));c=l,a=null;try{return $(o,!0)}finally{a=n,c=r}}function M(e,t){t=t?Object.assign({},R,t):R;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},r=u=>(typeof u=="function"&&(u=u(n.value)),oe(n,u));return[ie.bind(n),r]}function re(e,t,n){const r=q(e,t,!0,j);U(r)}function be(e,t,n){const r=q(e,t,!1,j);U(r)}function $e(e,t,n){ue=Se;const r=q(e,t,!1,j);(!n||!n.render)&&(r.user=!0),E?E.push(r):U(r)}function N(e,t,n){n=n?Object.assign({},R,n):R;const r=q(e,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,U(r),ie.bind(r)}function Ne(e,t,n){let r,u,s;arguments.length===2&&typeof t=="object"||arguments.length===1?(r=!0,u=e,s=t||{}):(r=e,u=t,s=n||{});let l=null,o=X,d=null,f=!1,i="initialValue"in s,w=typeof r=="function"&&N(r);const h=new Set,[x,C]=(s.storage||M)(s.initialValue),[P,I]=M(void 0),[D,S]=M(void 0,{equals:!1}),[m,A]=M(i?"ready":"unresolved");if(p.context){d=`${p.context.id}${p.context.count++}`;let g;s.ssrLoadFrom==="initial"?o=s.initialValue:p.load&&(g=p.load(d))&&(o=g[0])}function k(g,b,y,L){return l===g&&(l=null,L!==void 0&&(i=!0),(g===o||b===o)&&s.onHydrated&&queueMicrotask(()=>s.onHydrated(L,{value:b})),o=X,B(b,y)),b}function B(g,b){$(()=>{b===void 0&&C(()=>g),A(b!==void 0?"errored":i?"ready":"unresolved"),I(b);for(const y of h.keys())y.decrement();h.clear()},!1)}function G(){const g=ve,b=x(),y=P();if(y!==void 0&&!l)throw y;return a&&!a.user&&g&&re(()=>{D(),l&&(g.resolved||h.has(g)||(g.increment(),h.add(g)))}),b}function Q(g=!0){if(g!==!1&&f)return;f=!1;const b=w?w():r;if(b==null||b===!1){k(l,O(x));return}const y=o!==X?o:O(()=>u(b,{value:x(),refetching:g}));return typeof y!="object"||!(y&&"then"in y)?(k(l,y,void 0,b),y):(l=y,f=!0,queueMicrotask(()=>f=!1),$(()=>{A(i?"refreshing":"pending"),S()},!1),y.then(L=>k(y,L,void 0,b),L=>k(y,void 0,ae(L),b)))}return Object.defineProperties(G,{state:{get:()=>m()},error:{get:()=>P()},loading:{get(){const g=m();return g==="pending"||g==="refreshing"}},latest:{get(){if(!i)return G();const g=P();if(g&&!l)throw g;return x()}}}),w?re(()=>Q(!1)):Q(!1),[G,{refetch:Q,mutate:C}]}function O(e){if(a===null)return e();const t=a;a=null;try{return e()}finally{a=t}}function Ie(e,t,n){const r=Array.isArray(e);let u,s=n&&n.defer;return l=>{let o;if(r){o=Array(e.length);for(let f=0;f<e.length;f++)o[f]=e[f]()}else o=e();if(s){s=!1;return}const d=O(()=>t(o,u,l));return u=o,d}}function we(e){return c===null||(c.cleanups===null?c.cleanups=[e]:c.cleanups.push(e)),e}function De(){return c}function Le(e,t){const n=c,r=a;c=e,a=null;try{return $(t,!0)}catch(u){ne(u)}finally{c=n,a=r}}function Ue(e,t){const n=Symbol("context");return{id:n,Provider:Ae(n),defaultValue:e}}function Me(e){return c&&c.context&&c.context[e.id]!==void 0?c.context[e.id]:e.defaultValue}function ye(e){const t=N(e),n=N(()=>ee(t()));return n.toArray=()=>{const r=n();return Array.isArray(r)?r:r!=null?[r]:[]},n}let ve;function ie(){if(this.sources&&this.state)if(this.state===j)U(this);else{const e=v;v=null,$(()=>F(this),!1),v=e}if(a){const e=this.observers?this.observers.length:0;a.sources?(a.sources.push(this),a.sourceSlots.push(e)):(a.sources=[this],a.sourceSlots=[e]),this.observers?(this.observers.push(a),this.observerSlots.push(a.sources.length-1)):(this.observers=[a],this.observerSlots=[a.sources.length-1])}return this.value}function oe(e,t,n){let r=e.value;return(!e.comparator||!e.comparator(r,t))&&(e.value=t,e.observers&&e.observers.length&&$(()=>{for(let u=0;u<e.observers.length;u+=1){const s=e.observers[u],l=Y&&Y.running;l&&Y.disposed.has(s),(l?!s.tState:!s.state)&&(s.pure?v.push(s):E.push(s),s.observers&&fe(s)),l||(s.state=j)}if(v.length>1e6)throw v=[],new Error},!1)),t}function U(e){if(!e.fn)return;W(e);const t=c,n=a,r=K;a=c=e,me(e,e.value,r),a=n,c=t}function me(e,t,n){let r;try{r=e.fn(t)}catch(u){return e.pure&&(e.state=j,e.owned&&e.owned.forEach(W),e.owned=null),e.updatedAt=n+1,ne(u)}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?oe(e,r):e.value=r,e.updatedAt=n)}function q(e,t,n,r=j,u){const s={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:c,context:c?c.context:null,pure:n};return c===null||c!==le&&(c.owned?c.owned.push(s):c.owned=[s]),s}function _(e){if(e.state===0)return;if(e.state===H)return F(e);if(e.suspense&&O(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<K);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if(e=t[n],e.state===j)U(e);else if(e.state===H){const r=v;v=null,$(()=>F(e,t[0]),!1),v=r}}function $(e,t){if(v)return e();let n=!1;t||(v=[]),E?n=!0:E=[],K++;try{const r=e();return xe(n),r}catch(r){n||(E=null),v=null,ne(r)}}function xe(e){if(v&&(ce(v),v=null),e)return;const t=E;E=null,t.length&&$(()=>ue(t),!1)}function ce(e){for(let t=0;t<e.length;t++)_(e[t])}function Se(e){let t,n=0;for(t=0;t<e.length;t++){const r=e[t];r.user?e[n++]=r:_(r)}if(p.context){if(p.count){p.effects||(p.effects=[]),p.effects.push(...e.slice(0,n));return}else p.effects&&(e=[...p.effects,...e],n+=p.effects.length,delete p.effects);Z()}for(t=0;t<n;t++)_(e[t])}function F(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const r=e.sources[n];if(r.sources){const u=r.state;u===j?r!==t&&(!r.updatedAt||r.updatedAt<K)&&_(r):u===H&&F(r,t)}}}function fe(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=H,n.pure?v.push(n):E.push(n),n.observers&&fe(n))}}function W(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),r=e.sourceSlots.pop(),u=n.observers;if(u&&u.length){const s=u.pop(),l=n.observerSlots.pop();r<u.length&&(s.sourceSlots[l]=r,u[r]=s,n.observerSlots[r]=l)}}if(e.owned){for(t=e.owned.length-1;t>=0;t--)W(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function ae(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function ne(e,t=c){throw ae(e)}function ee(e){if(typeof e=="function"&&!e.length)return ee(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const r=ee(e[n]);Array.isArray(r)?t.push.apply(t,r):t.push(r)}return t}return e}function Ae(e,t){return function(r){let u;return be(()=>u=O(()=>(c.context={...c.context,[e]:r.value},ye(()=>r.children))),void 0),u}}const ke=Symbol("fallback");function se(e){for(let t=0;t<e.length;t++)e[t]()}function Oe(e,t,n={}){let r=[],u=[],s=[],l=0,o=t.length>1?[]:null;return we(()=>se(s)),()=>{let d=e()||[],f,i;return d[pe],O(()=>{let h=d.length,x,C,P,I,D,S,m,A,k;if(h===0)l!==0&&(se(s),s=[],r=[],u=[],l=0,o&&(o=[])),n.fallback&&(r=[ke],u[0]=z(B=>(s[0]=B,n.fallback())),l=1);else if(l===0){for(u=new Array(h),i=0;i<h;i++)r[i]=d[i],u[i]=z(w);l=h}else{for(P=new Array(h),I=new Array(h),o&&(D=new Array(h)),S=0,m=Math.min(l,h);S<m&&r[S]===d[S];S++);for(m=l-1,A=h-1;m>=S&&A>=S&&r[m]===d[A];m--,A--)P[A]=u[m],I[A]=s[m],o&&(D[A]=o[m]);for(x=new Map,C=new Array(A+1),i=A;i>=S;i--)k=d[i],f=x.get(k),C[i]=f===void 0?-1:f,x.set(k,i);for(f=S;f<=m;f++)k=r[f],i=x.get(k),i!==void 0&&i!==-1?(P[i]=u[f],I[i]=s[f],o&&(D[i]=o[f]),i=C[i],x.set(k,i)):s[f]();for(i=S;i<h;i++)i in P?(u[i]=P[i],s[i]=I[i],o&&(o[i]=D[i],o[i](i))):u[i]=z(w);u=u.slice(0,l=h),r=d.slice(0)}return u});function w(h){if(s[i]=h,o){const[x,C]=M(i);return o[i]=C,t(d[i],x)}return t(d[i])}}}let de=!1;function Te(){de=!0}function Ve(e,t){if(de&&p.context){const n=p.context;Z(he());const r=O(()=>e(t||{}));return Z(n),r}return O(()=>e(t||{}))}function T(){return!0}const te={get(e,t,n){return t===V?n:e.get(t)},has(e,t){return t===V?!0:e.has(t)},set:T,deleteProperty:T,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:T,deleteProperty:T}},ownKeys(e){return e.keys()}};function J(e){return(e=typeof e=="function"?e():e)?e:{}}function Pe(){for(let e=0,t=this.length;e<t;++e){const n=this[e]();if(n!==void 0)return n}}function Re(...e){let t=!1;for(let s=0;s<e.length;s++){const l=e[s];t=t||!!l&&V in l,e[s]=typeof l=="function"?(t=!0,N(l)):l}if(t)return new Proxy({get(s){for(let l=e.length-1;l>=0;l--){const o=J(e[l])[s];if(o!==void 0)return o}},has(s){for(let l=e.length-1;l>=0;l--)if(s in J(e[l]))return!0;return!1},keys(){const s=[];for(let l=0;l<e.length;l++)s.push(...Object.keys(J(e[l])));return[...new Set(s)]}},te);const n={},r={},u=new Set;for(let s=e.length-1;s>=0;s--){const l=e[s];if(!l)continue;const o=Object.getOwnPropertyNames(l);for(let d=0,f=o.length;d<f;d++){const i=o[d];if(i==="__proto__"||i==="constructor")continue;const w=Object.getOwnPropertyDescriptor(l,i);if(!u.has(i))w.get?(u.add(i),Object.defineProperty(n,i,{enumerable:!0,configurable:!0,get:Pe.bind(r[i]=[w.get.bind(l)])})):(w.value!==void 0&&u.add(i),n[i]=w.value);else{const h=r[i];h?w.get?h.push(w.get.bind(l)):w.value!==void 0&&h.push(()=>w.value):n[i]===void 0&&(n[i]=w.value)}}}return n}function He(e,...t){if(V in e){const u=new Set(t.length>1?t.flat():t[0]),s=t.map(l=>new Proxy({get(o){return l.includes(o)?e[o]:void 0},has(o){return l.includes(o)&&o in e},keys(){return l.filter(o=>o in e)}},te));return s.push(new Proxy({get(l){return u.has(l)?void 0:e[l]},has(l){return u.has(l)?!1:l in e},keys(){return Object.keys(e).filter(l=>!u.has(l))}},te)),s}const n={},r=t.map(()=>({}));for(const u of Object.getOwnPropertyNames(e)){const s=Object.getOwnPropertyDescriptor(e,u),l=!s.get&&!s.set&&s.enumerable&&s.writable&&s.configurable;let o=!1,d=0;for(const f of t)f.includes(u)&&(o=!0,l?r[d][u]=s.value:Object.defineProperty(r[d],u,s)),++d;o||(l?n[u]=s.value:Object.defineProperty(n,u,s))}return[...r,n]}let Ee=0;function _e(){const e=p.context;return e?`${e.id}${e.count++}`:`cl-${Ee++}`}const je=e=>`Stale read from <${e}>.`;function Fe(e){const t="fallback"in e&&{fallback:()=>e.fallback};return N(Oe(()=>e.each,e.children,t||void 0))}function Ke(e){const t=e.keyed,n=N(()=>e.when,void 0,{equals:(r,u)=>t?r===u:!r==!u});return N(()=>{const r=n();if(r){const u=e.children;return typeof u=="function"&&u.length>0?O(()=>u(t?r:()=>{if(!O(n))throw je("Show");return e.when})):u}return e.fallback},void 0,void 0)}export{Ce as $,Fe as F,Ke as S,M as a,N as b,Ve as c,$e as d,be as e,z as f,p as g,De as h,Te as i,Ie as j,Ue as k,Me as l,Re as m,Ne as n,we as o,_e as p,Le as r,He as s,O as u};
